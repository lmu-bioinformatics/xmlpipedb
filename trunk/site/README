README: XMLPipeDB Web Site Source Repository
============================================

This repository holds the source files for the top-level XMLPipeDB web site.  It
is built and maintained using Maven.

STAGING AND TESTING
-------------------

The files require server-side includes (SSI), so even during testing, you'll
need a running SSI-capable web server.

To stage the site locally, invoke:

    mvn site:stage -Dstage.root=<local-document-root>
  
The stage.root parameter indicates the absolute path to the directory within
which the site files are to be copied; typically, this is the local web server's
document root, or perhaps your user-specific web directory.
  
The site files will be placed in this path within that stage root:
  
    xmlpipedb.cs.lmu.edu/keck.cs.lmu.edu/afs/cs.lmu.edu/projects/x/xmlpipedb/web/htdocs
    
This insanely long path is due to the way Maven's site plugin binds the local
staging directory to the final deployed location, which is configured to be
scp://keck.cs.lmu.edu/afs/cs.lmu.edu/projects/x/xmlpipedb/web/htdocs.
Unfortunately, there is no known way (yet) for decoupling this when
testing/staging.

site:stage seems to avoid overwriting any files that are already present in
${stage.root}, so for best results, always delete
${stage.root}/xmlpipedb.cs.lmu.edu before running site:stage again.

DEPLOYMENT
----------

To deploy the web site, invoke:

    mvn site:deploy

This will do everything up to scp'ing the file to the right place.  An important
privacy reminder: when scp asks for your password via Maven, your password text
is NOT invisible.  Either set up a key, or be careful about when you invoke
mvn site:deploy.

* IMPORTANT POST-DEPLOYMENT STEP

At this writing, Maven generates a superfluous index.html file.  The real index
file is index.shtml, included in src/site/resources.  After mvn site:deploy,
make sure to manually go to ~xmlpipedb/web/htdocs and rename or delete
index.html.  For example:

    cd ~xmlpipedb/web/htdocs
    mv index.html index-maven.html

If this isn't done, then http://xmlpipedb.cs.lmu.edu will return this
autogenerated file, and not the intended home page.
