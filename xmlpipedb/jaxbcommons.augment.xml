<?xml version="1.0"?>
<project name="jaxbcommons.augment" default="jaxbcommons.augment">
	<!-- ... -->
	<import file="jaxbcommons.paths.xml" />
	<target name="jaxbcommons.generate.sources">
		<!-- Output code generation information -->
		<echo message="[jaxbcommons] Generating sources."/>
		<!-- Directory for generated sources -->
		<echo message="[jaxbcommons] Directory for generated sources:"/>
		<echo message="[jaxbcommons] jaxbcommons.generated.src.dir=${jaxbcommons.generated.src.dir}"/>
		<echo message="[jaxbcommons] Recreating directory for generated sources."/>
		<!--
		<delete dir="${jaxbcommons.generated.src.dir}"/>
		<mkdir dir="${jaxbcommons.generated.src.dir}"/>
		-->
		<!-- XJC classpath -->
		<echo message="[jaxbcommons] XJC classpath:"/>
		<property name="jaxbcommons.xjc.classpath.property" refid="jaxbcommons.xjc.classpath"/>
		<echo message="[jaxbcommons] jaxbcommons.xjc.classpath=${jaxbcommons.xjc.classpath.property}"/>
		<!-- XJC arguments  -->
		<echo message="[jaxbcommons] XJC arguments:"/>
		<echo message="[jaxbcommons] jaxbcommons.xjc.args=${jaxbcommons.xjc.args}"/>
		<!-- Bindings -->
		<echo message="[jaxbcommons] Bindings:"/>
		<property name="jaxbcommons.bindings.property" refid="jaxbcommons.bindings"/>
		<echo message="[jaxbcommons] jaxbcommons.bindings=${jaxbcommons.bindings.property}"/>
		<!-- Schemas -->
		<echo message="[jaxbcommons] Schemas:"/>
		<property name="jaxbcommons.schemas.property" refid="jaxbcommons.schemas"/>
		<echo message="[jaxbcommons] jaxbcommons.schemas=${jaxbcommons.schemas.property}"/>
		<!-- ... -->
		<echo message="[jaxbcommons] Defining the jaxbcommons.xjc task."/>
		<taskdef name="jaxbcommons.xjc" classname="com.sun.tools.xjc.XJCTask" classpathref="jaxbcommons.xjc.classpath"/>
		<echo message="[jaxbcommons] Running the jaxbcommons.xjc task."/>
		<jaxbcommons.xjc target="${jaxbcommons.generated.src.dir}" extension="true">
			<arg line="${jaxbcommons.xjc.args}"/>
			<binding refid="jaxbcommons.bindings"/>
			<schema refid="jaxbcommons.schemas"/>
			<!--depends refid="jaxbcommons.schemas/-->
			<!--produces dir="${jaxbcommons.generated.src.dir}"/-->
		</jaxbcommons.xjc>
		<echo message="[jaxbcommons] Deleting the object factory generated in default package."/>
		<delete file="${jaxbcommons.generated.src.dir}/ObjectFactory.java"/>
	</target>
	<!-- ... -->
	<target name="jaxbcommons.compile.generated.sources">
		<echo message="[jaxbcommons] Compiling the generated sources."/>
		<!-- Compilation directory -->
		<echo message="[jaxbcommons] Compilation directory for generated sources:"/>
		<echo message="[jaxbcommons] jaxbcommons.generated.classes.dir=${jaxbcommons.generated.classes.dir}"/>
		<echo message="[jaxbcommons] Recreating compilation directory for generated sources."/>
		<delete dir="${jaxbcommons.generated.classes.dir}"/>
		<mkdir dir="${jaxbcommons.generated.classes.dir}"/>
		<!-- Compilation classpath -->
		<echo message="[jaxbcommons] Compilation classpath:"/>
		<property name="jaxbcommons.compile.generated.sources.classpath.property" refid="jaxbcommons.compile.generated.sources.classpath"/>
		<echo message="[jaxbcommons] jaxbcommons.compile.generated.sources.classpath=${jaxbcommons.compile.generated.sources.classpath.property}"/>
		<!-- Target and source levels -->
		<echo message="[jaxbcommons] Target level:"/>
		<echo message="[jaxbcommons] jaxbcommons.javac.target=${jaxbcommons.javac.target}"/>
		<echo message="[jaxbcommons] Source level:"/>
		<echo message="[jaxbcommons] jaxbcommons.javac.source=${jaxbcommons.javac.source}"/>
		<!-- Compiling -->
		<echo message="[jaxbcommons] Compiling."/>
		<javac destdir="${jaxbcommons.generated.classes.dir}" debug="true" srcdir="${jaxbcommons.generated.src.dir}" 
			classpathref="jaxbcommons.compile.generated.sources.classpath" target="${jaxbcommons.javac.target}" source="${jaxbcommons.javac.source}">
		</javac>
		<!-- Copying resource files (all non-java files) -->
		<copy todir="${jaxbcommons.generated.classes.dir}">
			<fileset dir="${jaxbcommons.generated.src.dir}">
				<exclude name="**/*.java" />
			</fileset>
		</copy>
	</target>

	<!-- ... -->
	<target name="jaxbcommons.augment" depends="jaxbcommons.generate.sources, jaxbcommons.compile.generated.sources"/>
</project>