<!-- Buildfile for the Hana compiler -->

<project name="Xsd2db" default="jar">
  <property name="jarfilename" value="xsd2db"/>
  <property name="mainclass" value="app.Xsd2db"/>
  <property name="resources" value="resources"/>
  <property name="project.title" value="xsd to DB"/>
  <property name="src.dir" value="src"/>
  <property name="lib.dir" value="lib"/>	
  <property name="build.dir" value="build"/>
  <property name="dist.dir" value="dist"/>
  <property name="javadoc.dir" value="javadocs"/>
  
  <target name="clean" description="Remove generated files">
    <delete dir="${build.dir}"/>
    <delete dir="${dist.dir}"/>
    <delete dir="${javadoc.dir}"/>
  </target>
  
  <target name="init">
    <mkdir dir="${build.dir}"/>
    <mkdir dir="${dist.dir}"/>
    <tstamp/>
  </target>
  
  <target name="javadoc" description="Generate JavaDocs" depends="compile">
    <delete dir="${javadoc.dir}"/>
    <mkdir dir="${javadoc.dir}"/>
    <javadoc 
      sourcepath="${src.dir}"
      destdir="${javadoc.dir}"
      packagenames="*"
      doctitle="&lt;h1&gt;${project.title} API Documentation&lt;/h1&gt;"
    />
  </target>
  
  <target name="compile" depends="init">
    <javac srcdir="${src.dir}" destdir="${build.dir}"
    	classpath="${lib.dir}/cli.jar"
    />
    <!-- Copy the resource file, since it is needed at runtime. -->
  </target>
  
  <target name="jar" depends="compile" 
    description="Makes a jar file for the application">
    <jar destfile="${dist.dir}/${jarfilename}.jar"
       basedir="${build.dir}"
       excludes="**/*Tester*.class,**/*.java">
       <manifest>
         <attribute name="Main-Class" value="${mainclass}"/>
       </manifest>
     </jar>
    <copy todir="${dist.dir}/lib">
      <fileset dir="${lib.dir}/" includes="**/*.jar"/>
    </copy>
  </target>

  <target name="all" depends="javadoc, jar" description="Initializes, Compiles, makes Jar and creates JavaDocs"/>  
</project>
